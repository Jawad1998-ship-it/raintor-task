(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var s=n(5155),a=n(2115),l=n(8207),o=n(9667),i=n(5028);n(8413);let r=(0,i.default)(()=>Promise.all([n.e(761),n.e(712)]).then(n.bind(n,9712)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),c=(0,i.default)(()=>Promise.all([n.e(761),n.e(712)]).then(n.bind(n,9712)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),d=(0,i.default)(()=>Promise.all([n.e(761),n.e(712)]).then(n.bind(n,9712)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[9712]},ssr:!1}),h=(0,i.default)(()=>Promise.all([n.e(761),n.e(712)]).then(n.bind(n,9712)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[9712]},ssr:!1});function m(){let{receivedLocation:e,sendLocation:t,isClient:i}=function(e){let[t,s]=(0,a.useState)(null),[i,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{d(!0)},[]),(0,a.useEffect)(()=>{if(!c)return;n.e(761).then(n.t.bind(n,5752,23)).then(e=>{let t=e.Icon.Default.prototype;delete t._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})});let t=new l.$().withUrl(e).configureLogging(o.$.Information).withAutomaticReconnect().build();return s(t),t.start().then(()=>{console.log("SignalR Connected Successfully!"),t.on("ReceiveLatLon",(e,t,n)=>{r({lat:e,lon:t,userName:n})})}).catch(e=>console.error("SignalR Connection Error: ",e)),()=>{t.stop().then(()=>console.log("SignalR Disconnected."))}},[e,c]),{receivedLocation:i,sendLocation:async(e,n,s)=>{if(t&&"Connected"===t.state)try{await t.invoke("SendLatLon",e,n,s)}catch(e){console.error("Error sending location via SignalR: ",e)}else console.error("Cannot send location, SignalR connection is not active.")},isClient:c}}("https://your-signalr-hub-url.com/locationHub"),[m,u]=(0,a.useState)(25.73736464),[x,p]=(0,a.useState)(90.3644747);return i?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center p-4 font-sans",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"Real-Time Location Sharing"}),(0,s.jsxs)("div",{className:"w-full max-w-lg bg-white p-6 rounded-xl shadow-md mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"User A: Send Location"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Latitude:"})," ",m.toFixed(6)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Longitude:"})," ",x.toFixed(6)]}),(0,s.jsx)("button",{onClick:()=>{let e=m+(Math.random()-.5)*.01,n=x+(Math.random()-.5)*.01;u(e),p(n),t(e,n,"jawad.taj1998@gmail.com")},className:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors duration-200",children:"Send Simulated Location"})]}),(0,s.jsxs)("div",{className:"w-full max-w-lg bg-white p-6 rounded-xl shadow-md",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"User B: Receive Location"}),e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"User:"})," ",e.userName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Latitude:"})," ",e.lat.toFixed(6)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Longitude:"})," ",e.lon.toFixed(6)]})]}),(0,s.jsxs)(r,{center:[e.lat,e.lon],zoom:13,style:{height:"300px",width:"100%",borderRadius:"8px"},children:[(0,s.jsx)(c,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,s.jsx)(d,{position:[e.lat,e.lon],children:(0,s.jsxs)(h,{children:[e.userName,"'s Location"]})})]},Date.now())]}):(0,s.jsx)("div",{className:"text-center text-gray-500 py-10",children:(0,s.jsx)("p",{children:"Waiting for location updates..."})})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center p-4 font-sans",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"Real-Time Location Sharing"}),(0,s.jsx)("div",{className:"text-center text-gray-500 py-10",children:(0,s.jsx)("p",{children:"Loading..."})})]})}},4845:(e,t,n)=>{Promise.resolve().then(n.bind(n,284))}},e=>{var t=t=>e(e.s=t);e.O(0,[484,772,441,684,358],()=>t(4845)),_N_E=e.O()}]);