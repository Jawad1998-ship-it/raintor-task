(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{8199:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),a=s(2115),l=s(1264),i=s(7204),n=s(5656),o=s(3096),d=s(6766);let c=async e=>{let{pageParam:t=0}=e,s=await fetch("https://tech-test.raintor.com/api/users/GetUsersList?take=10&skip=".concat(t),{method:"GET"});if(!s.ok)throw console.error("API error:",await s.text()),Error("Failed to fetch users: ".concat(s.statusText));return await s.json()},h=e=>{let{user:t}=e;return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-2 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"listitem","aria-label":"User ".concat(t.firstName," ").concat(t.lastName),children:[(0,r.jsx)(d.default,{src:t.image,alt:"".concat(t.firstName,"'s avatar"),width:64,height:64,className:"w-16 h-16 rounded-full mr-4",loading:"lazy"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:[t.firstName," ",t.lastName]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.email}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.phone}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.university}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.company.title})]})]})},u=()=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-2 flex animate-pulse",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200 mr-4"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-1"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-1"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]});class m extends a.Component{static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}function x(){var e;let{ref:t,inView:s}=(0,o.Wx)(),[d,x]=(0,a.useState)(-1),g=(0,a.useRef)([]),{data:f,error:v,fetchNextPage:b,hasNextPage:p,isFetchingNextPage:j,status:N}=(0,l.q)({queryKey:["users"],queryFn:c,initialPageParam:0,getNextPageParam:(e,t)=>{if(e&&"number"==typeof e.total){let s=10*t.length;return s<e.total?s:void 0}}}),w=null!=(e=null==f?void 0:f.pages.flatMap(e=>e.users||e.data||e))?e:[];(0,a.useEffect)(()=>{s&&p&&!j&&b()},[s,p,j,b]),(0,a.useEffect)(()=>{if(d>=0&&g.current[d]){var e;null==(e=g.current[d])||e.focus()}},[d]);let y=(e,t,s)=>{"ArrowDown"===e.key?(x(e=>Math.min(e+1,s.length-1)),e.preventDefault()):"ArrowUp"===e.key&&(x(e=>Math.max(e-1,0)),e.preventDefault())};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4 text-center",children:"User Feed"}),(0,r.jsx)(m,{fallback:(0,r.jsxs)("div",{className:"text-center text-red-500",children:[(0,r.jsxs)("p",{children:["Error loading users: ",(null==v?void 0:v.message)||"Unknown error"]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Retry"})]}),children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:["loading"===N?(0,r.jsx)("div",{role:"status","aria-label":"Loading users",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(u,{},t))}):(0,r.jsx)(n.Ay,{children:e=>{let{height:s,width:a}=e;return(0,r.jsx)(i.Y1,{height:s,width:a,itemCount:w.length+5*!!j,itemSize:150,role:"list","aria-label":"User list",children:e=>{let{index:s,style:a}=e;if(s>=w.length)return(0,r.jsx)(u,{},s);let l=w[s];return(0,r.jsx)("div",{style:a,onKeyDown:e=>y(e,s,w),ref:e=>{g.current[s]=e,s===w.length-1&&t(e)},children:(0,r.jsx)(h,{user:l})})}})}}),j&&(0,r.jsx)("div",{className:"text-center mt-4",role:"status","aria-label":"Loading more users",children:(0,r.jsx)("p",{children:"Loading more..."})})]})})]})}},9126:(e,t,s)=>{Promise.resolve().then(s.bind(s,8199))}},e=>{var t=t=>e(e.s=t);e.O(0,[63,801,307,441,684,358],()=>t(9126)),_N_E=e.O()}]);